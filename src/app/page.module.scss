$panel-border-radius: 10px;
$galleryButtonWidthMobile: 75px;

@property --wipe-position {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 100%;
}

.root {
  --gallery-button-width: 200px;
  --panel-spacing: 0.5rem;
  --content-padding: 0.5rem;
  --border-width: 10px;
  --content-width: 100%;

  display: flex;
  flex-direction: column;
  font-family: var(--font-geist-sans);
  height: fit-content;
  margin: 0;

  .heroContainer {
    position: relative;
    display: flex;
    width: var(--content-width);
    min-height: 58px;
    padding: var(--content-padding) 0 0 0;
    margin: 0 auto;

    background-color: var(--primary-colour-base);
    border-bottom: 2px solid var(--border-colour-base);

    transition: background-color $theme_change_transition, width $menu_transition;

    .logoContainer {
      position: relative;
      width: 300px;
      height: 58px;
      margin: auto 0 0 auto;

      .logo {
        background-color: var(--primary-colour-dark);
        padding: var(--panel-spacing) / 2;
        border-radius: 20px 0 0 0;
        transition: background-color $theme_change_transition;
      }
    }
  }

  .contentContainer {
    display: flex;
    flex-direction: column;
    max-height: 100%;
    margin: 0;
    padding: 0;

    .underBar {
      position: sticky;
      top: 0;
      display: flex;
      align-items: center;
      height: 3rem;
      min-height: fit-content;
      width: var(--content-width);
      border-radius: 0;
      background-color: var(--primary-colour-dark);
      margin: 0 auto;

      --wipe-position: 100%;
      --gradient-length: 60%;
      --leftover-black: 2rem;

      -webkit-mask: linear-gradient(
        to left,
        black,
        black max(var(--wipe-position), var(--leftover-black)),
        transparent calc(var(--wipe-position) + var(--gradient-length)),
        transparent
      );
      mask: linear-gradient(
        to left,
        black,
        black max(var(--wipe-position), var(--leftover-black)),
        transparent calc(var(--wipe-position) + var(--gradient-length)),
        transparent
      );

      transition: --wipe-position 1000ms $ease-out, background-color 200ms, width $menu_transition, border-radius 1000ms;

      .galleryButton {
        width: var(--gallery-button-width);
        height: 30px;
        margin: 0 calc(100% - var(--gallery-button-width) - (var(--content-padding) * 2)) 0 0;
        padding: var(--content-padding);
        transition: margin 700ms $ease-in-out, width 700ms $ease-in;

        P {
          text-wrap: nowrap;
        }

        .galleryButtonIcon {
          height: 1.5rem;
          margin-left: 15px;
          fill: var(--text-colour-base);
        }
      }
    }

    .underBar.underBarSticky {
      --wipe-position: calc(-1 * 40%);

      background-color: var(--primary-colour-darkOpaque);
      backdrop-filter: blur(5px);
      transition: --wipe-position 2000ms cubic-bezier(0, 0.1, 0, 1);

      .galleryButton {
        --gallery-button-width: 2rem;
        width: var(--gallery-button-width);
        margin: 0 0 0 calc(100% - var(--gallery-button-width) - (var(--content-padding) * 2));
        transition: margin 400ms ease-out, width 400ms ease-out;

        p {
          display: none;
        }

        .galleryButtonIcon {
          margin: 0;
        }
      }
    }

    .content {
      width: calc(var(--content-width) - (var(--content-padding) * 2) - 5px);
      height: fit-content;
      border-bottom: unset;
      border-right: unset;
      padding: var(--content-padding);
      transition: background-color $theme_change_transition;
      margin-top: var(--panel-spacing);
    }
  }
}

@include md {
  .root {
    --content-width: 80%;

    .heroContainer {
      height: calc(20% - (var(--panel-spacing) * 2));
    }

    .heroContainer.stickyHero {
      width: 100%;
    }

    .contentContainer {
      .underBar {
        flex-direction: column;
        border-radius: 0 0 $panel-border-radius $panel-border-radius;
        margin: 0 auto;

        .galleryButton {
          display: flex;
          margin: 0 calc(100% - var(--gallery-button-width) - (var(--content-padding) * 2)) 0 0;
          padding: var(--content-padding);
        }
      }

      .content {
        margin: 0 auto;
        border-radius: 0;
        width: calc(var(--content-width) - (var(--content-padding) * 2) - 10px);
      }

      .underBar.underBarSticky {
        --wipe-position: calc(-1 * 50%);
        width: 100%;
        border-radius: 0 0 0 0;

        .galleryButton {
          margin: 0 0 0 calc(100% - var(--gallery-button-width) - (var(--content-padding) * 2));
        }
      }
    }
  }
}

@include md {
  .root {
    .contentContainer {
      .underBar.underBarSticky {
        --wipe-position: calc(-1 * 50%);
      }
    }
  }
}

@include lg {
  .root {
    .contentContainer {
      .underBar.underBarSticky {
        --wipe-position: calc(-1 * 52%);
      }
    }
  }
}

@include xl {
  .root {
    --content-width: 70%;

    .contentContainer {
      .underBar.underBarSticky {
        --wipe-position: calc(-1 * 40%);
      }
    }
  }
}

@include xxl {
  .root {
    --content-width: 60%;

    .heroContainer.stickyHero {
      width: var(--content-width);
    }

    .contentContainer {
      .underBar.underBarSticky {
        --wipe-position: calc(-1 * 20%);
        width: var(--content-width);
        border-radius: 0 0 $default_border_radius $default_border_radius;
      }
    }
  }
}
